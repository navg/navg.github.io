<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Biometric Registration 2</title>
</head>
<body>
  <h1>Biometric Registration</h1>
  <p>Register your fingerprint to create an account.</p>

  <button id="registerButton">Register</button>

  <script>
    // Check if the browser supports the necessary APIs
    if ('credentials' in navigator && 'PreventSilentAccess' in window) {
      const registerButton = document.getElementById('registerButton');

      registerButton.addEventListener('click', () => {
        const registerOptions = {
          publicKey: {
            // Specify the challenge and other options as needed
            // For simplicity, this example doesn't cover the full range of options
            challenge: new Uint8Array([ /* randomly generated challenge */ ]),
            rp: { name: 'WKApp' },
            user: { id: new Uint8Array([ 1234234234234234 ]), name: 'DDU' },
            authenticatorSelection: { userVerification: 'required' },
            attestation: 'direct'
          }
        };

        // Request fingerprint registration
        navigator.credentials.create(registerOptions)
          .then((credential) => {
            // Registration successful, securely store the credential on the server
            alert('Fingerprint registration successful! Credential:' + credential);

            // Send the credential data to the server for storage
            // Implement the server-side logic to securely store the credential

            // Redirect the user to the login page or perform other actions
            window.location.href = '/index.html';
          })
          .catch((error) => {
            // Registration failed
            alert('Fingerprint registration failed:' + error);
          });
      });
    } else {
      // Fingerprint registration not supported
      alert('Fingerprint registration not supported in this browser.');
    }
  </script>
</body>
</html>
