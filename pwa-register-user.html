<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Biometric Registration</title>
</head>
<body>
  <h1>Biometric Registration</h1>
  <p>Register your biometric data to create an account.</p>

  <button id="registerButton">Register11</button>

  <script>
    // Check if the browser supports the necessary APIs
    if ('credentials' in navigator && 'PreventSilentAccess' in window) {
      const registerButton = document.getElementById('registerButton');

      registerButton.addEventListener('click', () => {
        const uniqueUserID = '123456789'; // Replace with the actual unique user ID generated during registration
        const challenge = generateRandomChallenge(); // Generate a random challenge value

        const registerOptions = {
          publicKey: {
            challenge: challenge,
            rp: { name: 'Your App Name' },
            user: { id: uniqueUserID, name: 'User Name' },
            authenticatorSelection: { userVerification: 'required' },
            attestation: 'direct'
          }
        };

        // Request biometric registration
        navigator.credentials.create(registerOptions)
          .then((credential) => {
            // Registration successful, securely store the credential on the server
            console.log('Biometric registration successful! Credential:', credential);

            // Send the credential data to the server for storage
            // Implement the server-side logic to securely store the credential

            // Redirect the user to the login page or perform other actions
            // window.location.href = '/login.html';
          })
          .catch((error) => {
            // Registration failed
            console.error('Biometric registration failed:', error);
          });
      });
    } else {
      // Biometric registration not supported or specific biometric option not available
      console.error('Biometric registration not supported in this browser or for this biometric option.');
      // Provide appropriate messaging to the user
      // For example:
      // document.getElementById('registerButton').disabled = true;
      // document.getElementById('registerButton').innerText = 'Biometric registration not supported';
    }

    // Helper function to generate a random challenge
    function generateRandomChallenge() {
      const array = new Uint8Array(32); // 32 bytes = 256 bits (recommended length for the challenge)
      return window.crypto.getRandomValues(array);
    }
  </script>
</body>
</html>
